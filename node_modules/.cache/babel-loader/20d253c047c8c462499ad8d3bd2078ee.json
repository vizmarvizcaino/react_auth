{"ast":null,"code":"var _jsxFileName = \"/Users/Vizmar_Vizcaino/Desktop/Bootcamp/react/react-auth/src/App.js\",\n    _s2 = $RefreshSig$();\n\nimport axios from \"axios\";\nimport { useState, useEffect } from 'react';\nimport './App.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction App() {\n  _s2();\n\n  var _s = $RefreshSig$();\n\n  const baseUrl = 'https://ms-discord-upy5mhs63a-rj.a.run.app';\n  const [values, setValues] = useState({\n    email: \"jose@larnu.com\",\n    discordId: \"310544245155168256\"\n  });\n  const [token, setToken] = useState(null);\n  const [logged, setLogged] = useState(false);\n\n  const handleChange = event => {\n    setValues(prevValues => ({ ...prevValues,\n      [event.target.name]: event.target.value\n    }));\n  };\n\n  function login() {\n    axios.post(`${baseUrl}/auth/login`, values).then(res => res.data.token).then(token => {\n      console.log(token);\n      setToken(token);\n      setLogged(true);\n    });\n  }\n\n  function submit(e) {\n    e.preventDefault();\n    login();\n  }\n\n  const Form = () => {\n    return /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"form\",\n      onSubmit: submit,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"email\",\n          name: \"email\",\n          value: values.email || '',\n          onChange: handleChange,\n          placeholder: \"email\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"discordId\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"discordId\",\n          value: values.discordId || '',\n          onChange: handleChange,\n          placeholder: \"Discord Id\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 7\n    }, this);\n  };\n\n  const Welcome = () => {\n    _s();\n\n    const [checked, setChecked] = useState(false);\n    const [data, setData] = useState(null);\n\n    async function checkToken() {\n      axios.get(`${baseUrl}/auth/check`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      }).then(res => {\n        setData(res.data);\n        setChecked(true);\n      });\n    }\n\n    useEffect(() => {\n      checkToken();\n    }, []);\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: checked ? /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"Bienvenido \", data.username, \", tu numero de Usuario es: \", data.id, \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 21\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 98\n      }, this)\n    }, void 0, false);\n  };\n\n  _s(Welcome, \"o8NXwDS4caH51pOMW/2lK3f2Acc=\");\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: logged ? /*#__PURE__*/_jsxDEV(Welcome, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 18\n    }, this) : /*#__PURE__*/_jsxDEV(Form, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 31\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 99,\n    columnNumber: 5\n  }, this);\n}\n\n_s2(App, \"4Equ6XTcfDbAW1Um5HYEckydboQ=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["axios","useState","useEffect","App","baseUrl","values","setValues","email","discordId","token","setToken","logged","setLogged","handleChange","event","prevValues","target","name","value","login","post","then","res","data","console","log","submit","e","preventDefault","Form","Welcome","checked","setChecked","setData","checkToken","get","headers","Authorization","username","id"],"sources":["/Users/Vizmar_Vizcaino/Desktop/Bootcamp/react/react-auth/src/App.js"],"sourcesContent":["import axios from \"axios\";\nimport { useState, useEffect } from 'react';\nimport './App.css';\n\nfunction App() {\n\n  const baseUrl = 'https://ms-discord-upy5mhs63a-rj.a.run.app';\n  \n  const [values, setValues] = useState({\n    email: \"jose@larnu.com\",\n    discordId: \"310544245155168256\"\n  });\n  const [token, setToken] = useState(null);\n  const [logged, setLogged] = useState(false);\n  \n  \n  const handleChange = (event) => {\n    setValues((prevValues) => ({\n      ...prevValues,\n      [event.target.name]: event.target.value\n    }));\n  }\n\n  function login() {\n    axios.post(`${baseUrl}/auth/login`, values)\n      .then(res=> res.data.token)\n      .then(token => {\n        console.log(token)\n        setToken(token)\n        setLogged(true)\n      })\n  }\n  \n\n\n  function submit(e) {\n    e.preventDefault();\n    login();\n  }\n\n  const Form = () =>{\n    return (\n      <form className='form' onSubmit={submit}>\n        <div>\n          <label>email</label>\n          <input \n            type=\"email\"\n            name='email'\n            value={values.email || ''}\n            onChange={handleChange}\n            placeholder='email'\n            required\n          />\n        </div>\n        <div>\n          <label>discordId</label>\n          <input \n            type=\"text\"\n            name='discordId'\n            value={values.discordId || ''}\n            onChange={handleChange}\n            placeholder='Discord Id'\n            required\n          />\n        </div>\n        <button type=\"submit\">Login</button>\n      </form>\n    );\n  }\n\n  const Welcome = () => {\n\n    const [checked, setChecked] = useState(false);\n    const [data, setData] = useState(null);\n\n    async function checkToken () {\n      axios.get(`${baseUrl}/auth/check`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      }).then (res => {\n        setData(res.data);\n        setChecked(true);\n      })\n    }\n\n    useEffect(()  => {\n      checkToken();\n    }, []);  \n\n    return ( \n      <>\n        { checked ? <div>Bienvenido {data.username}, tu numero de Usuario es: {data.id} </div> : <div>Loading...</div>}\n      </>\n      )\n  }\n\n  return (\n    <div className=\"App\">\n      {\n        logged ? <Welcome/> : <Form/>\n      }\n    </div>\n  )\n}\nexport default App;"],"mappings":"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"},"metadata":{},"sourceType":"module"}