{"ast":null,"code":"var _jsxFileName = \"/Users/Vizmar_Vizcaino/Desktop/Bootcamp/react/react-auth/src/App.js\",\n    _s2 = $RefreshSig$();\n\nimport axios from \"axios\";\nimport { useState, useEffect } from 'react';\nimport './App.css';\nimport { Form } from './compnents/Formulario';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction App() {\n  _s2();\n\n  var _s = $RefreshSig$();\n\n  const baseUrl = 'https://ms-discord-upy5mhs63a-rj.a.run.app';\n  const [values, setValues] = useState({\n    email: \"jose@larnu.com\",\n    discordId: \"310544245155168256\"\n  });\n  const [token, setToken] = useState(null);\n  const [logged, setLogged] = useState(false);\n\n  const handleChange = event => {\n    setValues(prevValues => ({ ...prevValues,\n      [event.target.name]: event.target.value\n    }));\n  };\n\n  function login() {\n    axios.post(`${baseUrl}/auth/login`, values).then(res => res.data.token).then(token => {\n      setToken(token);\n      setLogged(true);\n    });\n  }\n\n  function submit(e) {\n    e.preventDefault();\n    login();\n  }\n\n  const Welcome = () => {\n    _s();\n\n    const [checked, setChecked] = useState(false);\n    const [data, setData] = useState(null);\n\n    async function checkToken() {\n      axios.get(`${baseUrl}/auth/check`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      }).then(res => {\n        setData(res.data);\n        setChecked(true);\n      });\n    }\n\n    useEffect(() => {\n      checkToken();\n    }, []);\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: checked ? /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"Bienvenido \", data.username, \", tu numero de Usuario es: \", data.id, \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 21\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 98\n      }, this)\n    }, void 0, false);\n  };\n\n  _s(Welcome, \"o8NXwDS4caH51pOMW/2lK3f2Acc=\");\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: logged ? /*#__PURE__*/_jsxDEV(Welcome, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 18\n    }, this) : /*#__PURE__*/_jsxDEV(Form, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 31\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 5\n  }, this);\n}\n\n_s2(App, \"4Equ6XTcfDbAW1Um5HYEckydboQ=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["axios","useState","useEffect","Form","App","baseUrl","values","setValues","email","discordId","token","setToken","logged","setLogged","handleChange","event","prevValues","target","name","value","login","post","then","res","data","submit","e","preventDefault","Welcome","checked","setChecked","setData","checkToken","get","headers","Authorization","username","id"],"sources":["/Users/Vizmar_Vizcaino/Desktop/Bootcamp/react/react-auth/src/App.js"],"sourcesContent":["import axios from \"axios\";\nimport { useState, useEffect } from 'react';\nimport './App.css';\nimport { Form } from './compnents/Formulario'\n\nfunction App() {\n\n  const baseUrl = 'https://ms-discord-upy5mhs63a-rj.a.run.app';\n  \n  const [values, setValues] = useState({\n    email: \"jose@larnu.com\",\n    discordId: \"310544245155168256\"\n  });\n  const [token, setToken] = useState(null);\n  const [logged, setLogged] = useState(false);\n  \n  \n  const handleChange = (event) => {\n    setValues((prevValues) => ({\n      ...prevValues,\n      [event.target.name]: event.target.value\n    }));\n  }\n\n  function login() {\n    axios.post(`${baseUrl}/auth/login`, values)\n      .then(res=> res.data.token)\n      .then(token => {\n        setToken(token)\n        setLogged(true)\n      })\n  }\n\n\n  function submit(e) {\n    e.preventDefault();\n    login();\n  }\n\n \n\n  const Welcome = () => {\n\n    const [checked, setChecked] = useState(false);\n    const [data, setData] = useState(null);\n\n    async function checkToken () {\n      axios.get(`${baseUrl}/auth/check`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      }).then (res => {\n        setData(res.data);\n        setChecked(true);\n      })\n    }\n\n    useEffect(()  => {\n      checkToken();\n    }, []);  \n\n    return ( \n      <>\n        { checked ? <div>Bienvenido {data.username}, tu numero de Usuario es: {data.id} </div> : <div>Loading...</div>}\n      </>\n      )\n  }\n\n  return (\n    <div className=\"App\">\n      {\n        logged ? <Welcome/> : <Form/>\n      }\n    </div>\n  )\n}\nexport default App;"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,OAAO,WAAP;AACA,SAASC,IAAT,QAAqB,wBAArB;;;;AAEA,SAASC,GAAT,GAAe;EAAA;;EAAA;;EAEb,MAAMC,OAAO,GAAG,4CAAhB;EAEA,MAAM,CAACC,MAAD,EAASC,SAAT,IAAsBN,QAAQ,CAAC;IACnCO,KAAK,EAAE,gBAD4B;IAEnCC,SAAS,EAAE;EAFwB,CAAD,CAApC;EAIA,MAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBV,QAAQ,CAAC,IAAD,CAAlC;EACA,MAAM,CAACW,MAAD,EAASC,SAAT,IAAsBZ,QAAQ,CAAC,KAAD,CAApC;;EAGA,MAAMa,YAAY,GAAIC,KAAD,IAAW;IAC9BR,SAAS,CAAES,UAAD,KAAiB,EACzB,GAAGA,UADsB;MAEzB,CAACD,KAAK,CAACE,MAAN,CAAaC,IAAd,GAAqBH,KAAK,CAACE,MAAN,CAAaE;IAFT,CAAjB,CAAD,CAAT;EAID,CALD;;EAOA,SAASC,KAAT,GAAiB;IACfpB,KAAK,CAACqB,IAAN,CAAY,GAAEhB,OAAQ,aAAtB,EAAoCC,MAApC,EACGgB,IADH,CACQC,GAAG,IAAGA,GAAG,CAACC,IAAJ,CAASd,KADvB,EAEGY,IAFH,CAEQZ,KAAK,IAAI;MACbC,QAAQ,CAACD,KAAD,CAAR;MACAG,SAAS,CAAC,IAAD,CAAT;IACD,CALH;EAMD;;EAGD,SAASY,MAAT,CAAgBC,CAAhB,EAAmB;IACjBA,CAAC,CAACC,cAAF;IACAP,KAAK;EACN;;EAID,MAAMQ,OAAO,GAAG,MAAM;IAAA;;IAEpB,MAAM,CAACC,OAAD,EAAUC,UAAV,IAAwB7B,QAAQ,CAAC,KAAD,CAAtC;IACA,MAAM,CAACuB,IAAD,EAAOO,OAAP,IAAkB9B,QAAQ,CAAC,IAAD,CAAhC;;IAEA,eAAe+B,UAAf,GAA6B;MAC3BhC,KAAK,CAACiC,GAAN,CAAW,GAAE5B,OAAQ,aAArB,EAAmC;QACjC6B,OAAO,EAAE;UACPC,aAAa,EAAG,UAASzB,KAAM;QADxB;MADwB,CAAnC,EAIGY,IAJH,CAISC,GAAG,IAAI;QACdQ,OAAO,CAACR,GAAG,CAACC,IAAL,CAAP;QACAM,UAAU,CAAC,IAAD,CAAV;MACD,CAPD;IAQD;;IAED5B,SAAS,CAAC,MAAO;MACf8B,UAAU;IACX,CAFQ,EAEN,EAFM,CAAT;IAIA,oBACE;MAAA,UACIH,OAAO,gBAAG;QAAA,0BAAiBL,IAAI,CAACY,QAAtB,iCAA2DZ,IAAI,CAACa,EAAhE;MAAA;QAAA;QAAA;QAAA;MAAA,QAAH,gBAAgF;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAD3F,iBADF;EAKD,CAzBD;;EApCa,GAoCPT,OApCO;;EA+Db,oBACE;IAAK,SAAS,EAAC,KAAf;IAAA,UAEIhB,MAAM,gBAAG,QAAC,OAAD;MAAA;MAAA;MAAA;IAAA,QAAH,gBAAgB,QAAC,IAAD;MAAA;MAAA;MAAA;IAAA;EAF1B;IAAA;IAAA;IAAA;EAAA,QADF;AAOD;;IAtEQR,G;;KAAAA,G;AAuET,eAAeA,GAAf"},"metadata":{},"sourceType":"module"}